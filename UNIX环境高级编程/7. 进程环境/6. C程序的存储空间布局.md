历史沿袭至今，C程序一直由下列几部分组成：
* 正文段。这是由CPU执行的机器指令部分。通常，正文段是可共享的，所以即使是频繁执行的程序（如文本编辑器、C编译器和shell等）在存储器中也只需要一个副本，另外，正文段常常是只读的，以防止程序由于意外而修改其指令。
* 初始化数据段。通常将此段成为数据段，它包含了程序中需要明确地赋初值的变量。例如，C程序中任何函数之外的生命：`int maxcount = 99;`。使用此变量以其初值存放在初始化数据段中。
* 未初始化数据段。通常将此段成为bss段，这一名称来源于早期汇编程序的一个操作符，意思是“由符号开始的块”（block started by symbol），在程序开始执行之前，内核将此段中的数据初始化为0或空指针。函数外的声明:`long sum[1000];`。使此变量存放在非初始化数据段中。
* 栈。自动变量以及每次函数调用时所需保存的信息都存放在此段中。每次函数调用时，其返回地址以及调用者的环境信息（如某些机器寄存器的值）都存放在栈中。然后，最近被调用的函数在栈上为其自动和临时变量分配存储空间。通过以这种方式使用栈，C递归函数可以工作。递归函数每次调用自身时，就使用一个新的栈帧，因此一次函数调用实例中的变量集不会影响领一次函数调用实例中的变量。
* 堆。通常在堆中进行动态存储分配。由于历史形成的惯例，堆位于未初始化数据段和栈之间。
下图显示了这些段的一种典型安排方式。这是程序的逻辑布局，虽然并不要求一个具体实现一定以这种方案安排其存储空间，但这是一种我们便于说明的典型安排。对于32为Intel x86处理器上的Linux，正文段从`0x08048000`单元开始，栈底则是在`0xC0000000`之下开始（在这种特定结构中，栈从高地址向低地址增长）。堆顶和栈顶之间未用的虚地址空间很大。
> a.out中还有若干其他类型的段，如包含符号表的段、包含调试信息的段以及包含动态共享库链接表的段等。这些部分并不装载到进程执行的程序映像中。

![[Pasted image 20250528132809.png]]
从上图还可以注意到，未初始化数据段的内容并不存放在磁盘程序文件中。其原因是，内核在程序开始运行前将它们都设置为0.需要存放在磁盘程序文件中的段只有正文段和初始化数据段。
size命令报告正文段、数据段和bss段的长度（以字节为单位）。例如：
![[Pasted image 20250528133032.png]]