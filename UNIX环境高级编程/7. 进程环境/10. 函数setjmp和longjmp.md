在C中，goto语句是不能跨越函数的，而执行这种类型跳转功能的是函数setjmp和long。这两个函数对于处理发生在很深层次嵌套函数调用中的出错情况是非常有用的。
下面这个程序的骨架部分。其主循环是从标准输入读一行，然后调用`do_line`处理该输入行。do_line函数调用get_token从该输入行中取下一个标记。一行中的第一个标记假定是一条某种形式的命令，switch语句就实现命令选择。对程序中示例的命令调用cmd_add函数。
```c
#include "apue.h"

#define TOK_ADD 5

void do_line(char *);
void cmd_add(void);
int get_token(void);

int main(void) {
	char line[MAXLINE];

	while (fgets(line, MAXLINE, stdin) != NULL) {
		do_line(line);
	}
	exit(0);
}

char *tok_ptr;

void do_line(char *ptr) {
	int cmd;
	tok_ptr = ptr;
	while((cmd = get_token(0)) > 0) {
		switch (cmd) {
			case TOK_ADD: {
				cmd_add();
			}break;
		}
	}
}

void cmd_add(void) {
	int token;
	token = get_token();
}

int get_token(void) {
	...
}
```
